# Mosquitto MQTT Broker Configuration — Argos Media Pipeline
# Internal only: runs on argos-dev-network, no external exposure.

# ── Listeners ─────────────────────────────────────────────
# MQTT protocol (media-service ↔ SvelteKit bridge)
listener 1883 0.0.0.0
protocol mqtt

# WebSocket transport (optional browser-direct fallback)
listener 9001 0.0.0.0
protocol websockets

# ── Authentication ────────────────────────────────────────
# Anonymous within Docker network — no external ports exposed
allow_anonymous true

# ── Persistence ───────────────────────────────────────────
# No disk persistence — all topics ephemeral except retained health
persistence false

# ── Logging ───────────────────────────────────────────────
log_dest stdout
log_type error
log_type warning
log_type notice
connection_messages true
log_timestamp true

# ── Message Limits ────────────────────────────────────────
max_queued_messages 1000
max_inflight_messages 20
max_packet_size 1048576
