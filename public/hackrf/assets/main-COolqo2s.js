import{e as Et,p as R,f as W,a as at,r as rt,g as e,u as ze,s as mt,n as bt,b as F,c as s,d as Oe,i as fe,t as I,h as o,j as ye,k as H,w as Ee,l as Ue,m as De,o as At,q as Ze,v as He,x as Te,y as g,z as Lt,A as ke,B as ot,C as _t,D as It,E as Ke,F as G,G as se,H as lt,I as Ae,J as Ge,K as xt,L as Ne,M as it,N as nt,O as st,P as Pe,Q as ve,R as yt,S as Y,T as we,U as Se}from"./vendor-B3Szt8pk.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))C(f);new MutationObserver(f=>{for(const a of f)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&C(h)}).observe(document,{childList:!0,subtree:!0});function d(f){const a={};return f.integrity&&(a.integrity=f.integrity),f.referrerPolicy&&(a.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?a.credentials="include":f.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function C(f){if(f.ep)return;f.ep=!0;const a=d(f);fetch(f.href,a)}})();const Wt="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Wt);Et();var Bt=W("<button><!></button>");function Me(v,n){let d=R(n,"variant",3,"primary"),C=R(n,"size",3,"md"),f=R(n,"disabled",3,!1),a=R(n,"class",3,""),h=rt(n,["$$slots","$$events","$$legacy","variant","size","disabled","class","children"]);const y={primary:"bg-primary-600 text-white hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 dark:bg-secondary-500 dark:hover:bg-secondary-600",outline:"border-2 border-surface-300 text-surface-700 hover:bg-surface-100 dark:border-surface-600 dark:text-surface-300 dark:hover:bg-surface-800",ghost:"text-surface-700 hover:bg-surface-100 dark:text-surface-300 dark:hover:bg-surface-800",danger:"bg-error text-white hover:bg-red-700"},p={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},q="inline-flex items-center justify-center font-medium rounded-md transition-colors duration-200 focus-ring disabled:opacity-50 disabled:cursor-not-allowed",_=ze(()=>`${q} ${y[d()]} ${p[C()]} ${a()}`);var l=Bt();at(l,()=>({class:e(_),disabled:f(),...h}));var t=s(l);mt(t,()=>n.children??bt),F(v,l)}var Gt=W("<div><!></div>");function et(v,n){let d=R(n,"variant",3,"default"),C=R(n,"padding",3,"md"),f=R(n,"class",3,""),a=rt(n,["$$slots","$$events","$$legacy","variant","padding","class","children"]);const h={default:"bg-surface-100 dark:bg-surface-800",elevated:"bg-surface-100 dark:bg-surface-800 shadow-lg",bordered:"bg-surface-50 dark:bg-surface-900 border border-surface-300 dark:border-surface-700"},y={none:"",sm:"p-3",md:"p-6",lg:"p-8"},p="rounded-lg transition-colors duration-200",q=ze(()=>`${p} ${h[d()]} ${y[C()]} ${f()}`);var _=Gt();at(_,()=>({class:e(q),...a}));var l=s(_);mt(l,()=>n.children??bt),F(v,_)}Oe(["click","keydown"]);var Nt=W('<span class="text-sm text-surface-700 dark:text-surface-300"> </span>'),Ot=W("<div><span></span> <!></div>");function Ut(v,n){let d=R(n,"size",3,"md"),C=R(n,"showLabel",3,!1),f=R(n,"label",3,""),a=R(n,"pulse",3,!0),h=R(n,"class",3,""),y=rt(n,["$$slots","$$events","$$legacy","status","size","showLabel","label","pulse","class"]);const p={online:"bg-success",offline:"bg-surface-400",warning:"bg-warning",error:"bg-error",idle:"bg-info"},q={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"},_={online:"Online",offline:"Offline",warning:"Warning",error:"Error",idle:"Idle"},l=ze(()=>f()||_[n.status]),t=ze(()=>a()&&(n.status==="online"||n.status==="warning"));var z=Ot();at(z,()=>({class:`inline-flex items-center gap-2 ${h()??""}`,...y}));var j=s(z);let X;var D=o(j,2);{var U=B=>{var O=Nt(),E=s(O);I(()=>H(E,e(l))),F(B,O)};fe(D,B=>{C()&&B(U)})}I(B=>X=ye(j,1,`rounded-full ${p[n.status]??""} ${q[d()]??""}`,null,X,B),[()=>({"animate-pulse-subtle":e(t)})]),F(v,z)}Oe(["mousedown"]);function wt(){if(typeof window>"u")return"system";const v=localStorage.getItem("theme");return v&&["light","dark","system"].includes(v)?v:"system"}const Re=Ee(wt());Re.subscribe(v=>{typeof window>"u"||(localStorage.setItem("theme",v),ct(v))});Ue(Re,v=>v!=="system"?v:typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");function ct(v){if(typeof document>"u")return;v==="dark"||v==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",v=>{Re.update(n=>(n==="system"&&ct("system"),n))});typeof window<"u"&&ct(wt());var Kt=W('<span class="ml-2"> </span>'),Vt=W('<span class="text-lg"> </span> <!>',1),Jt=W('<span class="ml-2"> </span>'),Qt=W('<span class="text-lg"> </span> <!> <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',1),Yt=(v,n,d)=>n(e(d).value),Xt=W('<button><span class="text-lg mr-2"> </span> </button>'),Zt=W('<div class="absolute right-0 mt-2 w-36 rounded-md shadow-lg bg-surface-100 dark:bg-surface-800 ring-1 ring-surface-200 dark:ring-surface-700 z-50"><div class="py-1"></div></div>'),en=W('<div class="relative"><!> <!></div>');function tn(v,n){De(n,!0);const[d,C]=Te(),f=()=>ke(Re,"$theme",d);let a=R(n,"showLabel",3,!1),h=R(n,"variant",3,"button"),y=Lt(!1);const p=[{value:"light",label:"Light",icon:"☀️"},{value:"dark",label:"Dark",icon:"🌙"},{value:"system",label:"System",icon:"💻"}];function q(){Re.update(D=>{const B=(p.findIndex(O=>O.value===D)+1)%p.length;return p[B].value})}function _(D){Re.set(D),g(y,!1)}const l=ze(()=>p.find(D=>D.value===f())||p[2]);var t=At(),z=Ze(t);{var j=D=>{Me(D,{variant:"ghost",size:"sm",onclick:q,"aria-label":"Toggle theme",children:(U,B)=>{var O=Vt(),E=Ze(O),Z=s(E),ee=o(E,2);{var Q=N=>{var P=Kt(),A=s(P);I(()=>H(A,e(l).label)),F(N,P)};fe(ee,N=>{a()&&N(Q)})}I(()=>H(Z,e(l).icon)),F(U,O)},$$slots:{default:!0}})},X=D=>{var U=en(),B=s(U);Me(B,{variant:"ghost",size:"sm",onclick:()=>g(y,!e(y)),"aria-label":"Select theme",get"aria-expanded"(){return e(y)},children:(Z,ee)=>{var Q=Qt(),N=Ze(Q),P=s(N),A=o(N,2);{var te=K=>{var ae=Jt(),m=s(ae);I(()=>H(m,e(l).label)),F(K,ae)};fe(A,K=>{a()&&K(te)})}I(()=>H(P,e(l).icon)),F(Z,Q)},$$slots:{default:!0}});var O=o(B,2);{var E=Z=>{var ee=Zt(),Q=s(ee);ot(Q,21,()=>p,_t,(N,P)=>{var A=Xt();let te;A.__click=[Yt,_,P];var K=s(A),ae=s(K),m=o(K);I($=>{te=ye(A,1,"flex items-center w-full px-4 py-2 text-sm text-surface-700 dark:text-surface-300 hover:bg-surface-200 dark:hover:bg-surface-700 transition-colors",null,te,$),H(ae,e(P).icon),H(m,` ${e(P).label??""}`)},[()=>({"bg-surface-200":f()===e(P).value,"dark:bg-surface-700":f()===e(P).value})]),F(N,A)}),F(Z,ee)};fe(O,Z=>{e(y)&&Z(E)})}F(D,U)};fe(z,D=>{h()==="button"?D(j):D(X,!1)})}F(v,t),He(),C()}Oe(["click"]);Oe(["keydown","click"]);class nn{socket=null;config;events;reconnectTimer=null;isManuallyDisconnected=!1;constructor(n,d={}){this.config={autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"],path:"/socket.io/",extraHeaders:{},...n},this.events=d,this.config.autoConnect&&this.connect()}connect(){if(this.socket?.connected){console.warn("WebSocket already connected");return}this.isManuallyDisconnected=!1;try{this.socket=It(this.config.url,{reconnection:this.config.reconnection,reconnectionAttempts:this.config.reconnectionAttempts,reconnectionDelay:this.config.reconnectionDelay,reconnectionDelayMax:this.config.reconnectionDelayMax,timeout:this.config.timeout,transports:this.config.transports,path:this.config.path,extraHeaders:this.config.extraHeaders}),this.setupEventHandlers()}catch(n){this.handleError(n)}}disconnect(){this.isManuallyDisconnected=!0,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.socket&&(this.socket.disconnect(),this.socket=null)}send(n,d){if(!this.socket?.connected)throw new Error("WebSocket is not connected");const C={type:n,payload:d,timestamp:Date.now()};this.socket.emit("message",C)}emit(n,d){if(!this.socket?.connected)throw new Error("WebSocket is not connected");this.socket.emit(n,d)}on(n,d){if(!this.socket)throw new Error("WebSocket is not initialized");this.socket.on(n,d)}off(n,d){this.socket&&(d?this.socket.off(n,d):this.socket.off(n))}get isConnected(){return this.socket?.connected??!1}get id(){return this.socket?.id}setupEventHandlers(){this.socket&&(this.socket.on("connect",()=>{console.log(`WebSocket connected to ${this.config.url}`),this.events.onConnect?.()}),this.socket.on("disconnect",n=>{console.log(`WebSocket disconnected from ${this.config.url}: ${n}`),this.events.onDisconnect?.(n),!this.isManuallyDisconnected&&this.config.reconnection&&this.handleReconnection()}),this.socket.on("connect_error",n=>{this.handleError(n)}),this.socket.on("message",n=>{this.events.onMessage?.(n)}),this.socket.io.on("reconnect_attempt",n=>{console.log(`Reconnection attempt ${n} to ${this.config.url}`),this.events.onReconnectAttempt?.(n)}),this.socket.io.on("reconnect_failed",()=>{console.error(`Failed to reconnect to ${this.config.url}`),this.events.onReconnectFailed?.()}),this.socket.io.on("reconnect",n=>{console.log(`Reconnected to ${this.config.url} after ${n} attempts`),this.events.onReconnect?.(n)}))}handleError(n){console.error(`WebSocket error for ${this.config.url}:`,n),this.events.onError?.(n)}handleReconnection(){console.log(`Attempting to reconnect to ${this.config.url}`)}destroy(){this.disconnect(),this.events={}}}const vt="8092",ft="8000",pt="2501";function Ce(v,n="http"){{const d=typeof window<"u"?window.location:null;if(d){const C=d.hostname;return`${n==="ws"?d.protocol==="https:"?"wss:":"ws:":d.protocol}//${C}:${v}`}return""}}const sn={hackrf:{http:Ce(vt,"http"),ws:Ce(vt,"ws"),api:"/api/hackrf"},wigle:{http:Ce(ft,"http"),ws:Ce(ft,"ws"),api:"/api"},kismet:{http:Ce(pt,"http"),ws:Ce(pt,"ws"),api:"/api"}};function an(v){return sn[v].ws}const ge=Ee({connected:!1,connecting:!1,error:null,lastConnected:null,reconnectAttempts:0}),Ve=Ee(null),dt=Ee(null),rn=Ee([]);let qe=null;function ht(v){const n=an("hackrf");if(qe?.isConnected){console.warn("HackRF WebSocket already connected");return}ge.update(d=>({...d,connecting:!0,error:null})),qe=new nn({url:n,path:"/socket.io/",reconnection:!0,reconnectionAttempts:10,reconnectionDelay:2e3,reconnectionDelayMax:1e4},{onConnect:()=>{ge.update(d=>({...d,connected:!0,connecting:!1,lastConnected:new Date,reconnectAttempts:0}))},onDisconnect:d=>{ge.update(C=>({...C,connected:!1,connecting:!1}))},onError:d=>{ge.update(C=>({...C,error:d,connecting:!1}))},onMessage:d=>{on(d)},onReconnectAttempt:d=>{ge.update(C=>({...C,connecting:!0,reconnectAttempts:d}))}})}function gt(){qe&&(qe.disconnect(),qe=null),ge.set({connected:!1,connecting:!1,error:null,lastConnected:null,reconnectAttempts:0})}function on(v){switch(v.type){case"spectrum":const n=v.payload;Ve.set(n),rn.update(d=>[...d,n].slice(-100));break;case"status":dt.set(v.payload);break;case"error":console.error("HackRF error:",v.payload),ge.update(d=>({...d,error:new Error(String(v.payload))}));break;default:console.log("Unknown HackRF message type:",v.type)}}function tt(v){if(!qe?.isConnected)throw new Error("HackRF WebSocket not connected");qe.emit("config_update",v)}const kt=Ue(ge,v=>v.connected);Ue(ge,v=>v.connecting);Ue(ge,v=>v.error);var ln=W('<div class="spectrum-display svelte-1pnxzof"><canvas class="svelte-1pnxzof"></canvas></div>');function cn(v,n){De(n,!1);const[d,C]=Te(),f=()=>ke(Ve,"$spectrumData",d);let a=R(n,"width",8,800),h=R(n,"height",8,300),y=R(n,"minDb",24,()=>-120),p=R(n,"maxDb",24,()=>-20),q=R(n,"gridLines",8,!0),_=R(n,"smoothing",8,.7),l=G(),t,z,j=[];const X="#0f0f0f",D="#333333",U="#00ff00",B="#ff0000",O="#888888";let E=[],Z=.95;Ke(()=>{if(t=e(l).getContext("2d"),!t)return;const m=window.devicePixelRatio||1;se(l,e(l).width=a()*m),se(l,e(l).height=h()*m),se(l,e(l).style.width=`${a()}px`),se(l,e(l).style.height=`${h()}px`),t.scale(m,m),ee()}),lt(()=>{z&&cancelAnimationFrame(z)});function ee(){if(!t)return;t.fillStyle=X,t.fillRect(0,0,a(),h()),q()&&Q();const m=f();m&&(N(m),P(m)),z=requestAnimationFrame(ee)}function Q(){if(!t)return;t.strokeStyle=D,t.lineWidth=.5;const m=20;for(let T=y();T<=p();T+=m){const b=A(T);t.beginPath(),t.moveTo(0,b),t.lineTo(a(),b),t.stroke(),t.fillStyle=O,t.font="10px monospace",t.fillText(`${T} dB`,5,b-2)}const $=10;for(let T=0;T<=$;T++){const b=a()/$*T;t.beginPath(),t.moveTo(b,0),t.lineTo(b,h()),t.stroke()}}function N(m){if(!t||!m.magnitude||m.magnitude.length===0)return;const $=m.magnitude,T=a()/$.length;if(j.length===$.length)for(let b=0;b<$.length;b++)$[b]=$[b]*(1-_())+j[b]*_();if(j=[...$],E.length!==$.length)E=[...$];else for(let b=0;b<$.length;b++)$[b]>E[b]?E[b]=$[b]:E[b]*=Z;t.strokeStyle=B,t.lineWidth=1,t.globalAlpha=.5,t.beginPath();for(let b=0;b<E.length;b++){const ne=b*T+T/2,c=A(E[b]);b===0?t.moveTo(ne,c):t.lineTo(ne,c)}t.stroke(),t.globalAlpha=1,t.strokeStyle=U,t.lineWidth=2,t.shadowBlur=10,t.shadowColor=U,t.beginPath();for(let b=0;b<$.length;b++){const ne=b*T+T/2,c=A($[b]);b===0?t.moveTo(ne,c):t.lineTo(ne,c)}t.stroke(),t.lineTo(a(),h()),t.lineTo(0,h()),t.closePath(),t.fillStyle=U,t.globalAlpha=.1,t.fill(),t.globalAlpha=1,t.shadowBlur=0}function P(m){if(!t)return;const $=m.centerFrequency-m.sampleRate/2,b=m.centerFrequency+m.sampleRate/2-$;t.fillStyle=O,t.font="10px monospace";const ne=5;for(let c=0;c<=ne;c++){const S=a()/ne*c,i=$+b/ne*c,L=te(i),w=t.measureText(L).width;t.fillText(L,S-w/2,h()-5)}}function A(m){const $=(m-y())/(p()-y());return h()-$*h()}function te(m){return m>=1e9?`${(m/1e9).toFixed(3)} GHz`:m>=1e6?`${(m/1e6).toFixed(3)} MHz`:m>=1e3?`${(m/1e3).toFixed(3)} kHz`:`${m.toFixed(0)} Hz`}Ae();var K=ln(),ae=s(K);Ge(ae,m=>g(l,m),()=>e(l)),I(()=>xt(ae,`width: ${a()??""}px; height: ${h()??""}px;`)),F(v,K),He(),C()}var dn=W('<div class="waterfall-display svelte-1jqljn0"><canvas class="svelte-1jqljn0"></canvas> <div class="controls svelte-1jqljn0"><label class="svelte-1jqljn0">Color Map: <select class="svelte-1jqljn0"><option>Turbo</option><option>Viridis</option><option>Plasma</option><option>Inferno</option></select></label> <label class="svelte-1jqljn0">Speed: <input type="range" min="1" max="5" step="1" class="svelte-1jqljn0"/></label></div></div>');function un(v,n){De(n,!1);const[d,C]=Te(),f=()=>ke(Ve,"$spectrumData",d);let a=R(n,"width",8,800),h=R(n,"height",8,400),y=R(n,"minDb",24,()=>-120),p=R(n,"maxDb",24,()=>-20),q=R(n,"colormap",12,"turbo"),_=R(n,"scrollSpeed",12,2),l=G(),t=G(),z,j=G();const X={viridis:Z(),plasma:ee(),inferno:Q(),turbo:E()};Ke(()=>{if(g(t,e(l).getContext("2d",{alpha:!1})),!e(t))return;const c=window.devicePixelRatio||1;se(l,e(l).width=a()*c),se(l,e(l).height=h()*c),se(l,e(l).style.width=`${a()}px`),se(l,e(l).style.height=`${h()}px`),e(t).scale(c,c),z=document.createElement("canvas"),z.width=a(),z.height=h(),g(j,z.getContext("2d",{alpha:!1})),e(j)&&(se(j,e(j).fillStyle="#000000"),e(j).fillRect(0,0,a(),h()))}),lt(()=>{});function D(c){if(!e(t)||!e(j)||!c.magnitude||c.magnitude.length===0)return;const S=e(j).getImageData(0,0,a(),h()-_());e(j).putImageData(S,0,_());const i=c.magnitude,L=a()/i.length,w=X[q()];for(let k=0;k<i.length;k++){const V=(i[k]-y())/(p()-y()),ce=Math.floor(Math.max(0,Math.min(255,V*255))),le=w[ce];se(j,e(j).fillStyle=le),e(j).fillRect(k*L,0,Math.ceil(L),_())}e(t).drawImage(z,0,0),U(c)}function U(c){if(!e(t))return;const S=c.centerFrequency-c.sampleRate/2,L=c.centerFrequency+c.sampleRate/2-S;se(t,e(t).fillStyle="rgba(0, 0, 0, 0.7)"),e(t).fillRect(0,h()-20,a(),20),se(t,e(t).fillStyle="#ffffff"),se(t,e(t).font="10px monospace"),se(t,e(t).textAlign="center");const w=5;for(let k=0;k<=w;k++){const re=a()/w*k,V=S+L/w*k,ce=O(V);e(t).fillText(ce,re,h()-5)}B()}function B(){if(!e(t))return;se(t,e(t).fillStyle="rgba(0, 0, 0, 0.7)"),e(t).fillRect(a()-60,0,60,h()),se(t,e(t).fillStyle="#ffffff"),se(t,e(t).font="10px monospace"),se(t,e(t).textAlign="right");const c=5;for(let S=0;S<=c;S++){const i=h()/c*S,L=i/_()*.1;e(t).fillText(`${L.toFixed(1)}s`,a()-5,i+10)}}function O(c){return c>=1e9?`${(c/1e9).toFixed(2)}G`:c>=1e6?`${(c/1e6).toFixed(2)}M`:`${(c/1e3).toFixed(0)}k`}function E(){const c=[];for(let S=0;S<256;S++){const i=S/255,L=Math.floor(255*(i<.5?4*i:1)),w=Math.floor(255*Math.sin(Math.PI*i)),k=Math.floor(255*(i>.5?4*(1-i):1));c.push(`rgb(${L}, ${w}, ${k})`)}return c}function Z(){const c=[];for(let S=0;S<256;S++){const i=S/255,L=Math.floor(255*(.267+.004*i+.329*i*i)),w=Math.floor(255*(0+.985*i-.158*i*i)),k=Math.floor(255*(.33+.458*i-.788*i*i));c.push(`rgb(${L}, ${w}, ${k})`)}return c}function ee(){const c=[];for(let S=0;S<256;S++){const i=S/255,L=Math.floor(255*(.05+2.329*i-2.614*i*i+.734*i*i*i)),w=Math.floor(255*(.02+.129*i+.863*i*i-.331*i*i*i)),k=Math.floor(255*(.53+.855*i-1.285*i*i+.421*i*i*i));c.push(`rgb(${L}, ${w}, ${k})`)}return c}function Q(){const c=[];for(let S=0;S<256;S++){const i=S/255,L=Math.floor(255*(i<.5?4*i:1)),w=Math.floor(255*(i<.5?0:2*(i-.5))),k=Math.floor(255*(1-i));c.push(`rgb(${L}, ${w}, ${k})`)}return c}Ne(()=>(f(),e(t),e(j)),()=>{f()&&e(t)&&e(j)&&D(f())}),it(),Ae();var N=dn(),P=s(N);Ge(P,c=>g(l,c),()=>e(l));var A=o(P,2),te=s(A),K=o(s(te));I(()=>{q(),nt(()=>{})});var ae=s(K);ae.value=ae.__value="turbo";var m=o(ae);m.value=m.__value="viridis";var $=o(m);$.value=$.__value="plasma";var T=o($);T.value=T.__value="inferno";var b=o(te,2),ne=o(s(b));I(()=>xt(P,`width: ${a()??""}px; height: ${h()??""}px;`)),st(K,q),Pe(ne,_),F(v,N),He(),C()}var vn=W('<button class="preset-button svelte-j0v9xt"> </button>'),fn=W('<div class="frequency-controls svelte-j0v9xt"><div class="control-section svelte-j0v9xt"><h3 class="svelte-j0v9xt">Frequency Control</h3> <div class="frequency-input-group svelte-j0v9xt"><button class="step-button svelte-j0v9xt">◀</button> <input type="number" placeholder="Frequency" step="0.001" class="svelte-j0v9xt"/> <select class="svelte-j0v9xt"><option>kHz</option><option>MHz</option><option>GHz</option></select> <button class="step-button svelte-j0v9xt">▶</button></div> <div class="sample-rate-group svelte-j0v9xt"><label class="svelte-j0v9xt">Sample Rate: <input type="number" step="0.001" class="svelte-j0v9xt"/> <select class="svelte-j0v9xt"><option>kHz</option><option>MHz</option></select></label></div></div> <div class="control-section svelte-j0v9xt"><h3 class="svelte-j0v9xt">Gain Control</h3> <div class="gain-controls svelte-j0v9xt"><label class="gain-slider svelte-j0v9xt"><span class="svelte-j0v9xt"> </span> <input type="range" min="0" max="62" step="2" class="svelte-j0v9xt"/></label> <label class="amplifier-toggle svelte-j0v9xt"><input type="checkbox" class="svelte-j0v9xt"/> <span>14dB Amplifier</span></label></div></div> <div class="control-section svelte-j0v9xt"><h3 class="svelte-j0v9xt">Frequency Presets</h3> <div class="presets svelte-j0v9xt"></div></div> <button class="apply-button svelte-j0v9xt">Apply Settings</button></div>');function pn(v,n){De(n,!1);const[d,C]=Te(),f=()=>ke(dt,"$hackrfStatus",d),a=()=>ke(kt,"$isConnected",d),h=[{name:"FM Radio",freq:1e8,sampleRate:24e5},{name:"2m Amateur",freq:145e6,sampleRate:24e5},{name:"70cm Amateur",freq:435e6,sampleRate:8e6},{name:"ADS-B",freq:109e7,sampleRate:2e6},{name:"GPS L1",freq:157542e4,sampleRate:2048e3},{name:"WiFi 2.4GHz",freq:2437e6,sampleRate:2e7},{name:"WiFi 5GHz",freq:518e7,sampleRate:2e7}];let y=G(""),p=G("MHz"),q=G(""),_=G("MHz"),l=G(20),t=G(!1);function z(x){x.frequency>=1e9?(g(y,(x.frequency/1e9).toFixed(3)),g(p,"GHz")):x.frequency>=1e6?(g(y,(x.frequency/1e6).toFixed(3)),g(p,"MHz")):(g(y,(x.frequency/1e3).toFixed(3)),g(p,"kHz")),x.sampleRate>=1e6?(g(q,(x.sampleRate/1e6).toFixed(3)),g(_,"MHz")):(g(q,(x.sampleRate/1e3).toFixed(3)),g(_,"kHz")),g(l,x.gain),g(t,x.amplifierEnabled)}function j(x,oe){const J=parseFloat(x);if(isNaN(J))return 0;switch(oe){case"GHz":return J*1e9;case"MHz":return J*1e6;case"kHz":return J*1e3;default:return J}}function X(){if(!a())return;const x=j(e(y),e(p)),oe=j(e(q),e(_));x>0&&oe>0&&tt({frequency:x,sampleRate:oe,gain:e(l),amplifierEnabled:e(t)})}function D(x){a()&&tt({frequency:x.freq,sampleRate:x.sampleRate,gain:e(l),amplifierEnabled:e(t)})}function U(x){x.key==="Enter"&&X()}function B(x){const oe=j(e(y),e(p)),J=j("1",e(p))*.1,ue=oe+x*J;tt({frequency:ue,sampleRate:j(e(q),e(_)),gain:e(l),amplifierEnabled:e(t)})}Ne(()=>f(),()=>{f()&&z(f())}),it(),Ae();var O=fn(),E=s(O),Z=o(s(E),2),ee=s(Z),Q=o(ee,2),N=o(Q,2);I(()=>{e(p),nt(()=>{})});var P=s(N);P.value=P.__value="kHz";var A=o(P);A.value=A.__value="MHz";var te=o(A);te.value=te.__value="GHz";var K=o(N,2),ae=o(Z,2),m=s(ae),$=o(s(m)),T=o($,2);I(()=>{e(_),nt(()=>{})});var b=s(T);b.value=b.__value="kHz";var ne=o(b);ne.value=ne.__value="MHz";var c=o(E,2),S=o(s(c),2),i=s(S),L=s(i),w=s(L),k=o(L,2),re=o(i,2),V=s(re),ce=o(c,2),le=o(s(ce),2);ot(le,5,()=>h,_t,(x,oe)=>{var J=vn(),ue=s(J);I(()=>{J.disabled=!a(),H(ue,(e(oe),Y(()=>e(oe).name)))}),ve("click",J,()=>D(e(oe))),F(x,J)});var me=o(ce,2);I(()=>{ee.disabled=!a(),Q.disabled=!a(),K.disabled=!a(),$.disabled=!a(),H(w,`VGA Gain: ${e(l)??""} dB`),k.disabled=!a(),V.disabled=!a(),me.disabled=!a()}),ve("click",ee,()=>B(-1)),Pe(Q,()=>e(y),x=>g(y,x)),ve("keypress",Q,U),st(N,()=>e(p),x=>g(p,x)),ve("click",K,()=>B(1)),Pe($,()=>e(q),x=>g(q,x)),ve("keypress",$,U),st(T,()=>e(_),x=>g(_,x)),Pe(k,()=>e(l),x=>g(l,x)),ve("change",k,X),yt(V,()=>e(t),x=>g(t,x)),ve("change",V,X),ve("click",me,X),F(v,O),He(),C()}var hn=W('<div><div></div> <div class="signal-info svelte-1je8lns"><div class="frequency svelte-1je8lns"> </div> <div class="details svelte-1je8lns"><span class="strength svelte-1je8lns"> </span> <span class="bandwidth svelte-1je8lns"> </span> <span class="count svelte-1je8lns"> </span></div></div> <div class="signal-time svelte-1je8lns"><div class="duration svelte-1je8lns"> </div> <div class="last-seen svelte-1je8lns"> </div></div></div>'),gn=W('<div class="empty-state svelte-1je8lns"> </div>'),mn=W('<div class="signal-detection-list svelte-1je8lns"><div class="header svelte-1je8lns"><h3 class="svelte-1je8lns"> </h3> <div class="controls svelte-1je8lns"><label class="svelte-1je8lns">Threshold: <input type="number" min="-120" max="-20" step="5" class="svelte-1je8lns"/> dB</label> <label class="svelte-1je8lns"><input type="checkbox" class="svelte-1je8lns"/> Auto-scroll</label> <button class="svelte-1je8lns">Clear All</button></div></div> <div class="sort-controls svelte-1je8lns"><button>Frequency <!></button> <button>Strength <!></button> <button>Bandwidth <!></button> <button>Last Seen <!></button></div> <div><!> <!></div></div>');function bn(v,n){De(n,!1);const[d,C]=Te(),f=()=>ke(Ve,"$spectrumData",d);let a=R(n,"threshold",28,()=>-70),h=R(n,"minBandwidth",8,1e4),y=R(n,"maxSignals",8,50),p=G(new Map),q=G([]),_=G("strength"),l=G(!0),t=G(!0),z=G(null);const j=5e3,X=1e4;let D;Ke(()=>{D=setInterval(O,X)}),lt(()=>{D&&clearInterval(D)});function U(r){if(!r.magnitude||r.magnitude.length===0)return;const u=r.magnitude,M=r.sampleRate/u.length,ie=r.centerFrequency-r.sampleRate/2;let de=!1,pe=0,$e=-1/0,xe=0;for(let he=0;he<u.length;he++){const be=u[he];if(be>=a()&&!de)de=!0,pe=he,$e=be,xe=1;else if(be>=a()&&de)$e=Math.max($e,be),xe++;else if(be<a()&&de){de=!1;const je=xe*M;if(je>=h()){const Be=pe+Math.floor(xe/2),Xe=ie+Be*M;B(Xe,$e,je)}}}if(de){const he=xe*M;if(he>=h()){const be=pe+Math.floor(xe/2),je=ie+be*M;B(je,$e,he)}}const Ye=Date.now();e(p).forEach(he=>{Ye-he.lastSeen.getTime()>j&&(he.active=!1)})}function B(r,u,M){const ie=`${Math.round(r/1e3)}`,de=new Date;if(e(p).has(ie)){const pe=e(p).get(ie);pe.frequency=r,pe.strength=u,pe.bandwidth=M,pe.lastSeen=de,pe.detectionCount++,pe.active=!0}else e(p).size<y()&&e(p).set(ie,{id:ie,frequency:r,strength:u,bandwidth:M,firstSeen:de,lastSeen:de,detectionCount:1,active:!0});g(p,e(p))}function O(){const r=Date.now(),u=6e4;e(p).forEach((M,ie)=>{r-M.lastSeen.getTime()>u&&e(p).delete(ie)}),g(p,e(p))}function E(){e(p).clear(),g(p,e(p)),g(z,null)}function Z(r){g(z,r)}function ee(r){return r>=1e9?`${(r/1e9).toFixed(6)} GHz`:r>=1e6?`${(r/1e6).toFixed(6)} MHz`:r>=1e3?`${(r/1e3).toFixed(3)} kHz`:`${r.toFixed(0)} Hz`}function Q(r){return r>=1e6?`${(r/1e6).toFixed(2)} MHz`:r>=1e3?`${(r/1e3).toFixed(1)} kHz`:`${r.toFixed(0)} Hz`}function N(r){return r<1e3?`${r}ms`:r<6e4?`${(r/1e3).toFixed(1)}s`:`${Math.floor(r/6e4)}m ${Math.floor(r%6e4/1e3)}s`}Ne(()=>f(),()=>{f()&&U(f())}),Ne(()=>(e(p),e(_),e(l)),()=>{g(q,Array.from(e(p).values()).sort((r,u)=>{let M=0;switch(e(_)){case"frequency":M=r.frequency-u.frequency;break;case"strength":M=r.strength-u.strength;break;case"bandwidth":M=r.bandwidth-u.bandwidth;break;case"lastSeen":M=r.lastSeen.getTime()-u.lastSeen.getTime();break}return e(l)?-M:M}))}),it(),Ae();var P=mn(),A=s(P),te=s(A),K=s(te),ae=o(te,2),m=s(ae),$=o(s(m)),T=o(m,2),b=s(T),ne=o(T,2),c=o(A,2),S=s(c);let i;var L=o(s(S));{var w=r=>{var u=Se();I(()=>H(u,e(l)?"▼":"▲")),F(r,u)};fe(L,r=>{e(_)==="frequency"&&r(w)})}var k=o(S,2);let re;var V=o(s(k));{var ce=r=>{var u=Se();I(()=>H(u,e(l)?"▼":"▲")),F(r,u)};fe(V,r=>{e(_)==="strength"&&r(ce)})}var le=o(k,2);let me;var x=o(s(le));{var oe=r=>{var u=Se();I(()=>H(u,e(l)?"▼":"▲")),F(r,u)};fe(x,r=>{e(_)==="bandwidth"&&r(oe)})}var J=o(le,2);let ue;var Fe=o(s(J));{var _e=r=>{var u=Se();I(()=>H(u,e(l)?"▼":"▲")),F(r,u)};fe(Fe,r=>{e(_)==="lastSeen"&&r(_e)})}var Le=o(c,2);let Ie;var We=s(Le);ot(We,1,()=>e(q),r=>r.id,(r,u)=>{var M=hn();let ie;var de=s(M);let pe;var $e=o(de,2),xe=s($e),Ye=s(xe),he=o(xe,2),be=s(he),je=s(be),Be=o(be,2),Xe=s(Be),$t=o(Be,2),St=s($t),Ft=o($e,2),ut=s(Ft),qt=s(ut),jt=o(ut,2),Ct=s(jt);I((Mt,Rt,Dt,Ht,Tt,Pt,zt)=>{ie=ye(M,1,"signal-item svelte-1je8lns",null,ie,Mt),pe=ye(de,1,"signal-status svelte-1je8lns",null,pe,Rt),H(Ye,Dt),H(je,`${Ht??""} dB`),H(Xe,Tt),H(St,`×${e(u),Y(()=>e(u).detectionCount)??""}`),H(qt,Pt),H(Ct,zt)},[()=>({active:e(u).active,selected:e(z)?.id===e(u).id}),()=>({active:e(u).active}),()=>(e(u),Y(()=>ee(e(u).frequency))),()=>(e(u),Y(()=>e(u).strength.toFixed(1))),()=>(e(u),Y(()=>Q(e(u).bandwidth))),()=>(e(u),Y(()=>N(e(u).lastSeen.getTime()-e(u).firstSeen.getTime()))),()=>(e(u),Y(()=>e(u).active?"Active":N(Date.now()-e(u).lastSeen.getTime())+" ago"))],we),ve("click",M,()=>Z(e(u))),F(r,M)});var Je=o(We,2);{var Qe=r=>{var u=gn(),M=s(u);I(()=>H(M,`No signals detected above ${a()??""} dB`)),F(r,u)};fe(Je,r=>{e(q),Y(()=>e(q).length===0)&&r(Qe)})}I((r,u,M,ie,de)=>{H(K,`Detected Signals (${e(q),Y(()=>e(q).length)??""})`),i=ye(S,1,"sort-button svelte-1je8lns",null,i,r),re=ye(k,1,"sort-button svelte-1je8lns",null,re,u),me=ye(le,1,"sort-button svelte-1je8lns",null,me,M),ue=ye(J,1,"sort-button svelte-1je8lns",null,ue,ie),Ie=ye(Le,1,"signal-list svelte-1je8lns",null,Ie,de)},[()=>({active:e(_)==="frequency"}),()=>({active:e(_)==="strength"}),()=>({active:e(_)==="bandwidth"}),()=>({active:e(_)==="lastSeen"}),()=>({"auto-scroll":e(t)})],we),Pe($,a),yt(b,()=>e(t),r=>g(t,r)),ve("click",ne,E),ve("click",S,()=>{g(_,"frequency"),g(l,!e(l))}),ve("click",k,()=>{g(_,"strength"),g(l,!e(l))}),ve("click",le,()=>{g(_,"bandwidth"),g(l,!e(l))}),ve("click",J,()=>{g(_,"lastSeen"),g(l,!e(l))}),F(v,P),He(),C()}var _n=W('<div class="flex items-center justify-between"><h2 class="text-lg font-semibold">Spectrum Display</h2> <div class="flex gap-2"><!> <!> <!></div></div>'),xn=W('<div class="flex-1 min-h-0"><!></div>'),yn=W('<div class="flex-1 min-h-0"><!></div>'),wn=W('<span class="text-danger-600 dark:text-danger-400"> </span>'),kn=W('<div class="flex items-center justify-between text-sm"><div class="flex gap-6"><span>Frequency: <strong> </strong></span> <span>Sample Rate: <strong> </strong></span> <span>Gain: <strong> </strong></span> <span>Amplifier: <strong> </strong></span></div> <!></div>'),$n=W('<div class="min-h-screen bg-surface-50 dark:bg-surface-900"><header class="bg-surface-100 dark:bg-surface-800 border-b border-surface-200 dark:border-surface-700"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><h1 class="text-xl font-semibold text-surface-900 dark:text-surface-100">HackRF SDR Dashboard</h1> <div class="flex items-center gap-4"><!> <!></div></div></div></header> <main class="flex flex-col h-[calc(100vh-4rem)]"><div class="flex-1 flex gap-4 p-4 overflow-hidden"><div class="w-96 flex flex-col gap-4"><!> <!> <div class="flex-1 min-h-0"><!></div></div> <div class="flex-1 flex flex-col gap-4"><!> <!> <!> <!></div></div></main></div>');function Sn(v,n){De(n,!1);const[d,C]=Te(),f=()=>ke(kt,"$isConnected",d),a=()=>ke(ge,"$connectionState",d),h=()=>ke(dt,"$hackrfStatus",d);let y=G("both"),p=G(),q=G(),_=G(800),l=G(300),t=G(800),z=G(300);Ke(()=>{ht();const w=()=>{e(p)&&(g(_,e(p).clientWidth-20),g(l,e(y)==="both"?300:500)),e(q)&&(g(t,e(q).clientWidth-20),g(z,e(y)==="both"?300:500))};return w(),window.addEventListener("resize",w),()=>{gt(),window.removeEventListener("resize",w)}});function j(){f()?gt():ht()}Ae();var X=$n(),D=s(X),U=s(D),B=s(U),O=o(s(B),2),E=s(O);const Z=we(()=>(f(),a(),Y(()=>f()?"online":a().connecting?"warning":"offline"))),ee=we(()=>(f(),a(),Y(()=>f()?"Connected":a().connecting?"Connecting...":"Disconnected")));Ut(E,{get status(){return e(Z)},showLabel:!0,get label(){return e(ee)}});var Q=o(E,2);tn(Q,{variant:"dropdown"});var N=o(D,2),P=s(N),A=s(P),te=s(A);et(te,{variant:"elevated",padding:"sm",children:(w,k)=>{const re=we(()=>f()?"danger":"primary");Me(w,{get variant(){return e(re)},onclick:j,class:"w-full",get disabled(){return a(),Y(()=>a().connecting)},children:(V,ce)=>{var le=Se();I(()=>H(le,(f(),a(),Y(()=>f()?"Disconnect":a().connecting?"Connecting...":"Connect to HackRF")))),F(V,le)},$$slots:{default:!0}})},$$slots:{default:!0}});var K=o(te,2);pn(K,{});var ae=o(K,2),m=s(ae);bn(m,{});var $=o(A,2),T=s($);et(T,{variant:"bordered",padding:"sm",children:(w,k)=>{var re=_n(),V=o(s(re),2),ce=s(V);const le=we(()=>e(y)==="spectrum"?"primary":"ghost");Me(ce,{get variant(){return e(le)},size:"sm",onclick:()=>g(y,"spectrum"),children:(ue,Fe)=>{var _e=Se("Spectrum");F(ue,_e)},$$slots:{default:!0}});var me=o(ce,2);const x=we(()=>e(y)==="waterfall"?"primary":"ghost");Me(me,{get variant(){return e(x)},size:"sm",onclick:()=>g(y,"waterfall"),children:(ue,Fe)=>{var _e=Se("Waterfall");F(ue,_e)},$$slots:{default:!0}});var oe=o(me,2);const J=we(()=>e(y)==="both"?"primary":"ghost");Me(oe,{get variant(){return e(J)},size:"sm",onclick:()=>g(y,"both"),children:(ue,Fe)=>{var _e=Se("Both");F(ue,_e)},$$slots:{default:!0}}),F(w,re)},$$slots:{default:!0}});var b=o(T,2);{var ne=w=>{var k=xn(),re=s(k);cn(re,{get width(){return e(_)},get height(){return e(l)}}),Ge(k,V=>g(p,V),()=>e(p)),F(w,k)};fe(b,w=>{(e(y)==="spectrum"||e(y)==="both")&&w(ne)})}var c=o(b,2);{var S=w=>{var k=yn(),re=s(k);un(re,{get width(){return e(t)},get height(){return e(z)}}),Ge(k,V=>g(q,V),()=>e(q)),F(w,k)};fe(c,w=>{(e(y)==="waterfall"||e(y)==="both")&&w(S)})}var i=o(c,2);{var L=w=>{et(w,{variant:"bordered",padding:"sm",children:(k,re)=>{var V=kn(),ce=s(V),le=s(ce),me=o(s(le)),x=s(me),oe=o(le,2),J=o(s(oe)),ue=s(J),Fe=o(oe,2),_e=o(s(Fe)),Le=s(_e),Ie=o(Fe,2),We=o(s(Ie)),Je=s(We),Qe=o(ce,2);{var r=u=>{var M=wn(),ie=s(M);I(()=>H(ie,`Error: ${a(),Y(()=>a().error.message)??""}`)),F(u,M)};fe(Qe,u=>{a(),Y(()=>a().error)&&u(r)})}I((u,M)=>{H(x,`${u??""} MHz`),H(ue,`${M??""} MS/s`),H(Le,`${h(),Y(()=>h().gain)??""} dB`),H(Je,(h(),Y(()=>h().amplifierEnabled?"ON":"OFF")))},[()=>(h(),Y(()=>(h().frequency/1e6).toFixed(3))),()=>(h(),Y(()=>(h().sampleRate/1e6).toFixed(3)))],we),F(k,V)},$$slots:{default:!0}})};fe(i,w=>{h()&&w(L)})}F(v,X),He(),C()}new Sn({target:document.getElementById("app")});
//# sourceMappingURL=main-COolqo2s.js.map
