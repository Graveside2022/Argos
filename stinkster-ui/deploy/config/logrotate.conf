# Logrotate configuration for WigleToTAK
# Place this file in /etc/logrotate.d/wigletotak

/var/log/wigletotak/*.log {
    daily
    rotate 14
    missingok
    notifempty
    compress
    delaycompress
    create 0640 pi pi
    sharedscripts
    postrotate
        # Signal the application to reopen log files
        systemctl reload wigletotak > /dev/null 2>&1 || true
    endscript
}

/var/log/nginx/wigletotak_*.log {
    daily
    rotate 14
    missingok
    notifempty
    compress
    delaycompress
    create 0640 www-data adm
    sharedscripts
    postrotate
        # Reload nginx to reopen log files
        systemctl reload nginx > /dev/null 2>&1 || true
    endscript
}

/opt/wigletotak/backend/logs/*.log {
    daily
    rotate 7
    missingok
    notifempty
    compress
    delaycompress
    create 0640 pi pi
    size 100M
    sharedscripts
    postrotate
        # Signal the application to reopen log files
        systemctl reload wigletotak > /dev/null 2>&1 || true
    endscript
}